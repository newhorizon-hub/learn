<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I Numeri Relativi ‚Äî Metodo Universale</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, #00695c 0%, #00897b 100%);
            color: white;
            border-radius: 16px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,105,92,0.3);
        }
        
        header h1 {
            font-size: 2rem;
            margin-bottom: 8px;
        }
        
        header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }
        
        .progress-bar {
            background: #e0e0e0;
            border-radius: 10px;
            height: 12px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #00695c, #26a69a);
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 0%;
        }
        
        .phase {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .phase.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .phase-title {
            background: linear-gradient(135deg, #00695c 0%, #00897b 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .phase-title h2 {
            font-size: 1.4rem;
        }
        
        .phase-number {
            background: rgba(255,255,255,0.2);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .instruction {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 12px 16px;
            border-radius: 0 8px 8px 0;
            margin-bottom: 20px;
            font-size: 0.95rem;
        }
        
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #e0e0e0;
            position: relative;
        }
        
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }
        
        .card.viewed {
            border-color: #4caf50;
        }
        
        .card.viewed::after {
            content: '‚úì';
            position: absolute;
            top: 10px;
            right: 10px;
            background: #4caf50;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }
        
        .card-title {
            font-weight: bold;
            color: #00695c;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .card-content {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e0e0e0;
            color: #555;
        }
        
        .card.expanded .card-content {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        .card-hint {
            color: #999;
            font-size: 0.85rem;
            margin-top: 8px;
        }
        
        .card.expanded .card-hint {
            display: none;
        }
        
        .example-box {
            background: #f5f5f5;
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }
        
        .positive { color: #27ae60; font-weight: bold; }
        .negative { color: #e74c3c; font-weight: bold; }
        .neutral { color: #3498db; font-weight: bold; }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 15px;
        }
        
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #00695c 0%, #00897b 100%);
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,105,92,0.4);
        }
        
        .btn-secondary {
            background: #e0e0e0;
            color: #555;
        }
        
        .btn-secondary:hover {
            background: #d0d0d0;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Quiz styles */
        .quiz-question {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #e0e0e0;
        }
        
        .quiz-question.correct {
            border-color: #4caf50;
            background: #f1f8e9;
        }
        
        .quiz-question.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }
        
        .question-text {
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }
        
        .question-category {
            font-size: 0.8rem;
            color: #00695c;
            background: #e0f2f1;
            padding: 4px 10px;
            border-radius: 12px;
            display: inline-block;
            margin-bottom: 10px;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .option {
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .option:hover:not(.disabled) {
            border-color: #00695c;
            background: #e0f2f1;
        }
        
        .option.selected {
            border-color: #00695c;
            background: #e0f2f1;
        }
        
        .option.disabled {
            cursor: default;
        }
        
        .option.correct-answer {
            border-color: #4caf50;
            background: #c8e6c9;
        }
        
        .option.wrong-answer {
            border-color: #f44336;
            background: #ffcdd2;
        }
        
        .option-letter {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .feedback {
            margin-top: 15px;
            padding: 12px;
            border-radius: 8px;
            display: none;
        }
        
        .feedback.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        .feedback.correct {
            background: #c8e6c9;
            color: #2e7d32;
        }
        
        .feedback.incorrect {
            background: #ffcdd2;
            color: #c62828;
        }
        
        /* Ripasso styles */
        .review-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .review-section.needs-review {
            border-left: 4px solid #ff9800;
            background: #fff8e1;
        }
        
        .review-section.mastered {
            border-left: 4px solid #4caf50;
            background: #e8f5e9;
        }
        
        .review-label {
            font-size: 0.85rem;
            padding: 4px 12px;
            border-radius: 12px;
            display: inline-block;
            margin-bottom: 10px;
        }
        
        .review-label.needs-review {
            background: #ff9800;
            color: white;
        }
        
        .review-label.mastered {
            background: #4caf50;
            color: white;
        }
        
        .score-display {
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        
        .score-number {
            font-size: 3rem;
            font-weight: bold;
            color: #00695c;
        }
        
        .thermometer-visual {
            display: flex;
            justify-content: center;
            margin: 15px 0;
        }
        
        .thermo-svg {
            width: 60px;
        }
        
        .number-line {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 15px;
            background: #fafafa;
            border-radius: 8px;
            margin: 10px 0;
            overflow-x: auto;
        }
        
        .number-line span {
            min-width: 30px;
            text-align: center;
            font-weight: 500;
        }
        
        .rule-box {
            background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
            border: 2px solid #ffc107;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .rule-box h4 {
            color: #f57f17;
            margin-bottom: 10px;
        }
        
        table.rule-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        .rule-table td, .rule-table th {
            padding: 8px 12px;
            border: 1px solid #ddd;
            text-align: center;
        }
        
        .rule-table th {
            background: #ffc107;
            color: #333;
        }
        
        .concept-line {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .concept-line:last-child {
            border-bottom: none;
        }
        
        @media print {
            .nav-buttons, .progress-bar, header, .instruction { display: none !important; }
            .phase { display: none !important; }
            #phase5 { display: block !important; }
            .review-section { break-inside: avoid; }
        }
        
        @media (max-width: 600px) {
            body { padding: 10px; }
            header h1 { font-size: 1.5rem; }
            .cards-grid { grid-template-columns: 1fr; }
            .btn { padding: 12px 20px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>I Numeri Relativi</h1>
            <p>Metodo Universale ‚Äî Percorso di Apprendimento</p>
        </header>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        
        <!-- FASE 1: Introduzione -->
        <div class="phase active" id="phase1">
            <div class="phase-title">
                <div class="phase-number">1</div>
                <h2>Introduzione ai Numeri Relativi</h2>
            </div>
            
            <div class="instruction">
                ‚û§ Clicca su ogni scheda per scoprire il contenuto. Devi aprirle tutte per proseguire.
            </div>
            
            <div class="cards-grid" id="cards1">
                <div class="card" data-card="def">
                    <div class="card-title">üìö Definizione</div>
                    <div class="card-hint">Clicca per scoprire cosa sono i numeri relativi</div>
                    <div class="card-content">
                        <p>I <strong>numeri relativi</strong> sono numeri dotati di <strong>segno</strong>: positivo (+) o negativo (‚àí).</p>
                        <p style="margin-top: 10px;">L'insieme degli interi relativi si indica con <strong>‚Ñ§</strong> = {..., ‚àí3, ‚àí2, ‚àí1, 0, +1, +2, +3, ...}</p>
                    </div>
                </div>
                
                <div class="card" data-card="thermo">
                    <div class="card-title">üå°Ô∏è Il Termometro</div>
                    <div class="card-hint">Clicca per vedere come funziona</div>
                    <div class="card-content">
                        Il termometro √® il modo pi√π intuitivo per capire i numeri relativi:
                        <div class="thermometer-visual">
                            <svg class="thermo-svg" viewBox="0 0 40 120">
                                <rect x="15" y="10" width="10" height="80" rx="5" fill="#e0e0e0" stroke="#999" stroke-width="1"/>
                                <circle cx="20" cy="100" r="12" fill="#e74c3c"/>
                                <rect x="17" y="50" width="6" height="40" fill="#e74c3c"/>
                                <line x1="28" y1="20" x2="35" y2="20" stroke="#666" stroke-width="1"/>
                                <text x="36" y="23" font-size="8" fill="#e74c3c">+30¬∞C</text>
                                <line x1="28" y1="40" x2="35" y2="40" stroke="#666" stroke-width="1"/>
                                <text x="36" y="43" font-size="8" fill="#e74c3c">+10¬∞C</text>
                                <line x1="28" y1="50" x2="35" y2="50" stroke="#666" stroke-width="2"/>
                                <text x="36" y="53" font-size="8" fill="#3498db" font-weight="bold">0¬∞C</text>
                                <line x1="28" y1="60" x2="35" y2="60" stroke="#666" stroke-width="1"/>
                                <text x="36" y="63" font-size="8" fill="#3498db">‚àí10¬∞C</text>
                                <line x1="28" y1="80" x2="35" y2="80" stroke="#666" stroke-width="1"/>
                                <text x="36" y="83" font-size="8" fill="#3498db">‚àí30¬∞C</text>
                            </svg>
                        </div>
                        <p><span class="negative">Sotto zero</span> = numeri negativi<br>
                        <span class="positive">Sopra zero</span> = numeri positivi</p>
                    </div>
                </div>
                
                <div class="card" data-card="examples">
                    <div class="card-title">üåç Esempi dalla Vita Reale</div>
                    <div class="card-hint">Clicca per vedere dove li troviamo</div>
                    <div class="card-content">
                        <p>üå°Ô∏è <strong>Temperature:</strong> ‚àí5¬∞C sotto lo zero, +20¬∞C sopra lo zero</p>
                        <p>‚õ∞Ô∏è <strong>Altitudini:</strong> +8848 m (Everest), ‚àí400 m (Mar Morto)</p>
                        <p>üí∞ <strong>Soldi:</strong> +500 ‚Ç¨ credito, ‚àí100 ‚Ç¨ debito</p>
                        <p>üìÖ <strong>Anni:</strong> 50 a.C. = ‚àí50, 2024 d.C. = +2024</p>
                    </div>
                </div>
                
                <div class="card" data-card="line">
                    <div class="card-title">üìè La Linea dei Numeri</div>
                    <div class="card-hint">Clicca per visualizzarla</div>
                    <div class="card-content">
                        <div class="number-line">
                            <span class="negative">‚àí5</span>
                            <span class="negative">‚àí4</span>
                            <span class="negative">‚àí3</span>
                            <span class="negative">‚àí2</span>
                            <span class="negative">‚àí1</span>
                            <span class="neutral" style="font-size: 1.2em;">0</span>
                            <span class="positive">+1</span>
                            <span class="positive">+2</span>
                            <span class="positive">+3</span>
                            <span class="positive">+4</span>
                            <span class="positive">+5</span>
                            <span>‚Üí</span>
                        </div>
                        <p style="text-align: center; margin-top: 10px;">
                            <span class="negative">‚Üê NEGATIVI</span> | 
                            <span class="neutral">0</span> | 
                            <span class="positive">POSITIVI ‚Üí</span>
                        </p>
                    </div>
                </div>
                
                <div class="card" data-card="abs">
                    <div class="card-title">üìê Valore Assoluto</div>
                    <div class="card-hint">Clicca per capire cos'√®</div>
                    <div class="card-content">
                        <p>Il <strong>valore assoluto</strong>* (v.a.) |a| √® la <strong>distanza dallo zero</strong>, indipendentemente dal segno.</p>
                        <div class="example-box">
                            |+5| = 5<br>
                            |‚àí5| = 5<br>
                            |0| = 0
                        </div>
                        <p><strong>Propriet√†:</strong> Il valore assoluto √® sempre ‚â• 0.</p>
                    </div>
                </div>
                
                <div class="card" data-card="compare">
                    <div class="card-title">‚öñÔ∏è Confronto</div>
                    <div class="card-hint">Clicca per imparare a confrontare</div>
                    <div class="card-content">
                        <p>Ogni <span class="positive">positivo</span> > 0 > ogni <span class="negative">negativo</span></p>
                        <div class="example-box">
                            +3 > +1 > 0 > ‚àí2 > ‚àí5
                        </div>
                        <p><strong>Tra due negativi</strong>, √® maggiore quello con v.a. <strong>minore</strong>:</p>
                        <div class="example-box">
                            ‚àí2 > ‚àí5 (perch√© |‚àí2| = 2 < 5 = |‚àí5|)
                        </div>
                    </div>
                </div>
                
                <div class="card" data-card="opposite">
                    <div class="card-title">‚ÜîÔ∏è Numeri Opposti</div>
                    <div class="card-hint">Clicca per scoprirli</div>
                    <div class="card-content">
                        <p>Due numeri sono <strong>opposti</strong> se hanno stesso valore assoluto e <strong>segno contrario</strong>.</p>
                        <div class="example-box">
                            Opposto di +5 √® ‚àí5<br>
                            Opposto di ‚àí3 √® +3
                        </div>
                        <p><strong>Propriet√†:</strong> a + (‚àía) = 0<br>
                        <em>La somma di due opposti √® sempre zero!</em></p>
                    </div>
                </div>
                
                <div class="card" data-card="concordi">
                    <div class="card-title">üéØ Concordi e Discordi</div>
                    <div class="card-hint">Clicca per questa definizione fondamentale</div>
                    <div class="card-content">
                        <div class="rule-box">
                            <p><strong style="color: #27ae60;">CONCORDI</strong> = stesso segno</p>
                            <div class="example-box">+1 e +2 oppure ‚àí3 e ‚àí5</div>
                        </div>
                        <div class="rule-box">
                            <p><strong style="color: #e74c3c;">DISCORDI</strong> = segno opposto</p>
                            <div class="example-box">+1 e ‚àí2 oppure ‚àí7 e +4</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <div></div>
                <button class="btn btn-primary" id="btn1" disabled onclick="goToPhase(2)">Continua ‚Üí</button>
            </div>
        </div>
        
        <!-- FASE 2: Operazioni -->
        <div class="phase" id="phase2">
            <div class="phase-title">
                <div class="phase-number">2</div>
                <h2>Operazioni con i Numeri Relativi</h2>
            </div>
            
            <div class="instruction">
                ‚û§ Clicca su ogni scheda per scoprire le regole operative. Devi aprirle tutte per proseguire.
            </div>
            
            <div class="cards-grid" id="cards2">
                <div class="card" data-card="rule" style="grid-column: 1 / -1;">
                    <div class="card-title">‚≠ê LA REGOLA UNIVERSALE DEI SEGNI</div>
                    <div class="card-hint">Clicca per la regola pi√π importante!</div>
                    <div class="card-content">
                        <table class="rule-table">
                            <tr>
                                <th>Segni</th>
                                <th>Risultato</th>
                            </tr>
                            <tr>
                                <td><strong>CONCORDI</strong> (+ e +) oppure (‚àí e ‚àí)</td>
                                <td><span class="positive">POSITIVO (+)</span></td>
                            </tr>
                            <tr>
                                <td><strong>DISCORDI</strong> (+ e ‚àí) oppure (‚àí e +)</td>
                                <td><span class="negative">NEGATIVO (‚àí)</span></td>
                            </tr>
                        </table>
                        <p style="text-align: center; margin-top: 15px; font-weight: bold;">
                            Vale per TUTTE le operazioni ‚Äî anche con le frazioni!
                        </p>
                    </div>
                </div>
                
                <div class="card" data-card="signsymbol">
                    <div class="card-title">‚ö†Ô∏è SEGNO e OPERATORE sono diversi!</div>
                    <div class="card-hint">Clicca per capire la differenza cruciale</div>
                    <div class="card-content">
                        <div class="example-box" style="font-size: 1.3em; text-align: center;">
                            +2 <span style="color: #00695c;">‚àí</span> (<span class="negative">‚àí3</span>)
                        </div>
                        <p style="text-align: center; margin-top: 10px;">
                            <span style="color: #00695c; font-weight: bold;">OPERATORE</span> = simbolo dell'operazione<br>
                            <span class="negative">SEGNO</span> = del numero
                        </p>
                        <p style="margin-top: 15px;"><strong>Attenzione!</strong> Non confonderli mai!</p>
                    </div>
                </div>
                
                <div class="card" data-card="method">
                    <div class="card-title">üìã Il Metodo in 3 Passi</div>
                    <div class="card-hint">Clicca per il metodo infallibile</div>
                    <div class="card-content">
                        <p><strong>1. IDENTIFICA</strong> ‚Äî Distingui il segno del numero dal simbolo dell'operazione</p>
                        <p style="margin-top: 10px;"><strong>2. CLASSIFICA</strong> ‚Äî I due segni sono concordi o discordi?</p>
                        <p style="margin-top: 10px;"><strong>3. CALCOLA</strong> ‚Äî Applica la regola universale</p>
                    </div>
                </div>
                
                <div class="card" data-card="sum">
                    <div class="card-title">‚ûï‚ûñ Somma Algebrica</div>
                    <div class="card-hint">Clicca per gli esempi</div>
                    <div class="card-content">
                        <p>Applica la regola alle parentesi, poi calcola:</p>
                        <div class="example-box">
                            ‚àí2 + (<span class="negative">‚àí3</span>) = ‚àí2 ‚àí 3 = ‚àí5<br>
                            <small>operatore + e segno ‚àí = discordi ‚Üí diventa ‚àí</small>
                        </div>
                        <div class="example-box">
                            +4 ‚àí (<span class="negative">‚àí5</span>) = +4 + 5 = +9<br>
                            <small>operatore ‚àí e segno ‚àí = concordi ‚Üí diventa +</small>
                        </div>
                        <div class="example-box">
                            ‚àí5 + (<span class="positive">+3</span>) = ‚àí5 + 3 = ‚àí2<br>
                            <small>operatore + e segno + = concordi ‚Üí resta +</small>
                        </div>
                    </div>
                </div>
                
                <div class="card" data-card="multdiv">
                    <div class="card-title">‚úñÔ∏è‚ûó Moltiplicazione e Divisione</div>
                    <div class="card-hint">Clicca per gli esempi</div>
                    <div class="card-content">
                        <p>Applica direttamente la regola:</p>
                        <p><strong>Moltiplicazione:</strong></p>
                        <div class="example-box">
                            (<span class="negative">‚àí2</span>) ¬∑ (<span class="positive">+5</span>) = <span class="negative">‚àí10</span> (discordi)<br>
                            (<span class="negative">‚àí3</span>) ¬∑ (<span class="negative">‚àí4</span>) = <span class="positive">+12</span> (concordi)
                        </div>
                        <p><strong>Divisione:</strong></p>
                        <div class="example-box">
                            (<span class="positive">+25</span>) : (<span class="negative">‚àí5</span>) = <span class="negative">‚àí5</span> (discordi)<br>
                            (<span class="negative">‚àí12</span>) : (<span class="negative">‚àí4</span>) = <span class="positive">+3</span> (concordi)
                        </div>
                    </div>
                </div>
                
                <div class="card" data-card="fractions">
                    <div class="card-title">üìä Con le Frazioni</div>
                    <div class="card-hint">Clicca per vedere che funziona uguale</div>
                    <div class="card-content">
                        <p>La regola dei segni vale anche per le frazioni!</p>
                        <div class="example-box">
                            (‚àí¬Ω) ¬∑ (‚àí¬º) = +‚Öõ<br>
                            <small>concordi ‚Üí positivo</small>
                        </div>
                        <div class="example-box">
                            (‚àí¬º) : (‚àí¬≥‚ÅÑ‚ÇÇ) = +‚Öô<br>
                            <small>concordi ‚Üí positivo</small>
                        </div>
                        <p style="margin-top: 10px; font-size: 0.9em; color: #666;"><em>(ma non appartengono a ‚Ñ§)</em></p>
                    </div>
                </div>
                
                <div class="card" data-card="multiple">
                    <div class="card-title">üî¢ Pi√π Fattori: Conta i "meno"</div>
                    <div class="card-hint">Clicca per la regola con pi√π numeri</div>
                    <div class="card-content">
                        <p>Con pi√π di due fattori, conta i segni negativi:</p>
                        <div class="rule-box">
                            <p><strong>Numero PARI di ‚àí</strong> ‚Üí risultato <span class="positive">positivo</span></p>
                            <div class="example-box">
                                (‚àí2) ¬∑ (‚àí3) ¬∑ (+4) = <span class="positive">+24</span><br>
                                <small>(2 segni ‚àí)</small>
                            </div>
                        </div>
                        <div class="rule-box">
                            <p><strong>Numero DISPARI di ‚àí</strong> ‚Üí risultato <span class="negative">negativo</span></p>
                            <div class="example-box">
                                (‚àí2) ¬∑ (‚àí3) ¬∑ (‚àí4) = <span class="negative">‚àí24</span><br>
                                <small>(3 segni ‚àí)</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card" data-card="zero">
                    <div class="card-title">üîµ Propriet√† dello Zero</div>
                    <div class="card-hint">Clicca per i casi speciali</div>
                    <div class="card-content">
                        <p>‚Ä¢ a + 0 = a <em>(elemento neutro della somma)</em></p>
                        <p style="margin-top: 8px;">‚Ä¢ a √ó 0 = 0 <em>(qualsiasi numero per zero fa zero)</em></p>
                        <p style="margin-top: 8px;">‚Ä¢ 0 : a = 0 <em>(se a ‚â† 0)</em></p>
                        <p style="margin-top: 8px; color: #e74c3c; font-weight: bold;">‚Ä¢ a : 0 = IMPOSSIBILE! <em>(divisione per zero)</em></p>
                    </div>
                </div>
                
                <div class="card" data-card="errors">
                    <div class="card-title">‚ùå Errori Comuni da Evitare</div>
                    <div class="card-hint">Clicca per non sbagliare!</div>
                    <div class="card-content">
                        <div class="example-box" style="background: #ffebee;">
                            ‚Ä¢ (‚àí5) ‚àí (‚àí3) ‚â† ‚àí8<br>
                            <span class="positive">‚úì Corretto: (‚àí5) + (+3) = ‚àí2</span><br>
                            <small>(operatore ‚àí e segno ‚àí = concordi ‚Üí diventa +)</small>
                        </div>
                        <div class="example-box" style="background: #ffebee; margin-top: 10px;">
                            ‚Ä¢ (‚àí2) √ó (‚àí3) ‚â† ‚àí6<br>
                            <span class="positive">‚úì Corretto: concordi ‚Üí +6</span><br>
                            <small>(due negativi danno sempre positivo)</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="goToPhase(1)">‚Üê Indietro</button>
                <button class="btn btn-primary" id="btn2" disabled onclick="goToPhase(3)">Continua ‚Üí</button>
            </div>
        </div>
        
        <!-- FASE 3: Concetti Chiave -->
        <div class="phase" id="phase3">
            <div class="phase-title">
                <div class="phase-number">3</div>
                <h2>Concetti Chiave ‚Äî Riepilogo</h2>
            </div>
            
            <div class="instruction">
                ‚û§ Espandi ogni concetto chiave per ripassare prima della verifica.
            </div>
            
            <div class="cards-grid" id="cards3">
                <div class="card" data-card="key1">
                    <div class="card-title">üéØ Concordi vs Discordi</div>
                    <div class="card-hint">Clicca per ripassare</div>
                    <div class="card-content">
                        <p>La distinzione fondamentale:</p>
                        <p class="concept-line">‚úÖ <strong>CONCORDI:</strong> stesso segno (+ +) o (‚àí ‚àí) ‚Üí risultato <span class="positive">POSITIVO</span></p>
                        <p class="concept-line">‚ùé <strong>DISCORDI:</strong> segno opposto (+ ‚àí) o (‚àí +) ‚Üí risultato <span class="negative">NEGATIVO</span></p>
                        <p style="margin-top: 10px;"><em>Questa regola vale per moltiplicazione, divisione e per eliminare le parentesi nella somma algebrica!</em></p>
                    </div>
                </div>
                
                <div class="card" data-card="key2">
                    <div class="card-title">‚ö†Ô∏è SEGNO e OPERATORE sono diversi!</div>
                    <div class="card-hint">Clicca per ripassare</div>
                    <div class="card-content">
                        <p>Nella somma algebrica, devi identificare:</p>
                        <p class="concept-line">üîß <strong>OPERATORE:</strong> il simbolo dell'operazione (+ o ‚àí) tra i termini</p>
                        <p class="concept-line">üè∑Ô∏è <strong>SEGNO:</strong> il segno del numero tra parentesi</p>
                        <p style="margin-top: 10px;">Poi applichi la regola concordi/discordi all'operatore e al segno per decidere cosa mettere al posto della parentesi.</p>
                    </div>
                </div>
                
                <div class="card" data-card="key3">
                    <div class="card-title">‚öñÔ∏è Confronto tra Negativi</div>
                    <div class="card-hint">Clicca per ripassare</div>
                    <div class="card-content">
                        <p>Tra due numeri negativi, √® <strong>maggiore</strong> quello con v.a. <strong>minore</strong>.</p>
                        <div class="example-box">
                            ‚àí2 > ‚àí5 perch√© |‚àí2| = 2 < 5 = |‚àí5|
                        </div>
                        <p>üå°Ô∏è <em>Pensa al termometro: ‚àí2¬∞C √® "pi√π caldo" di ‚àí5¬∞C!</em></p>
                    </div>
                </div>
                
                <div class="card" data-card="key4">
                    <div class="card-title">‚ÜîÔ∏è Numeri Opposti</div>
                    <div class="card-hint">Clicca per ripassare</div>
                    <div class="card-content">
                        <p>Due numeri sono opposti se:</p>
                        <p class="concept-line">üìê Hanno lo <strong>stesso valore assoluto</strong></p>
                        <p class="concept-line">üîÑ Hanno <strong>segno contrario</strong></p>
                        <p style="margin-top: 10px;"><strong>Propriet√† fondamentale:</strong> a + (‚àía) = 0</p>
                        <p><em>La somma di due numeri opposti √® sempre zero!</em></p>
                    </div>
                </div>
                
                <div class="card" data-card="key5">
                    <div class="card-title">üî¢ Pi√π Fattori Negativi</div>
                    <div class="card-hint">Clicca per ripassare</div>
                    <div class="card-content">
                        <p>Quando moltiplichi pi√π numeri:</p>
                        <p class="concept-line">‚úÖ <strong>PARI</strong> fattori negativi ‚Üí risultato <span class="positive">POSITIVO</span></p>
                        <p class="concept-line">‚ùé <strong>DISPARI</strong> fattori negativi ‚Üí risultato <span class="negative">NEGATIVO</span></p>
                        <p style="margin-top: 10px;"><em>Conta quanti segni ‚àí ci sono e guarda se sono pari o dispari!</em></p>
                    </div>
                </div>
                
                <div class="card" data-card="key6">
                    <div class="card-title">üö´ Divisione per Zero</div>
                    <div class="card-hint">Clicca per ripassare</div>
                    <div class="card-content">
                        <p style="color: #e74c3c; font-weight: bold; font-size: 1.2em;">
                            La divisione per zero √® IMPOSSIBILE!
                        </p>
                        <p style="margin-top: 10px;">Ricorda:</p>
                        <p class="concept-line">‚úÖ 0 : a = 0 (zero diviso qualcosa fa zero)</p>
                        <p class="concept-line">üö´ a : 0 = impossibile (non si pu√≤ dividere per zero)</p>
                    </div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="goToPhase(2)">‚Üê Indietro</button>
                <button class="btn btn-primary" id="btn3" disabled onclick="goToPhase(4)">Vai alla Verifica ‚Üí</button>
            </div>
        </div>
        
        <!-- FASE 4: Verifica -->
        <div class="phase" id="phase4">
            <div class="phase-title">
                <div class="phase-number">4</div>
                <h2>Verifica le tue Conoscenze</h2>
            </div>
            
            <div class="instruction">
                ‚û§ Rispondi a tutte le domande, poi clicca "Verifica Risposte".
            </div>
            
            <div id="quizContainer"></div>
            
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="goToPhase(3)">‚Üê Indietro</button>
                <button class="btn btn-primary" id="btnVerify" onclick="verifyQuiz()">Verifica Risposte</button>
            </div>
        </div>
        
        <!-- FASE 5: Ripasso -->
        <div class="phase" id="phase5">
            <div class="phase-title">
                <div class="phase-number">5</div>
                <h2>Il Tuo Ripasso Personalizzato</h2>
            </div>
            
            <div class="score-display" id="scoreDisplay"></div>
            
            <div id="reviewContainer"></div>
            
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="goToPhase(4)">‚Üê Rivedi Errori</button>
                <button class="btn btn-primary" onclick="window.print()">üñ®Ô∏è Stampa Ripasso</button>
                <button class="btn btn-secondary" onclick="restartQuiz()">üîÑ Ricomincia</button>
            </div>
        </div>
    </div>

    <script>
        // Quiz data
        const quizData = [
            {
                category: "Definizioni",
                question: "Come si chiamano due numeri che hanno lo stesso segno?",
                options: ["Opposti", "Concordi", "Discordi", "Assoluti"],
                correct: 1,
                explanation: "Due numeri con lo stesso segno (entrambi positivi o entrambi negativi) si chiamano CONCORDI."
            },
            {
                category: "Definizioni",
                question: "Qual √® il valore assoluto di ‚àí7?",
                options: ["‚àí7", "7", "0", "‚àí1"],
                correct: 1,
                explanation: "Il valore assoluto √® la distanza dallo zero, quindi |‚àí7| = 7."
            },
            {
                category: "Confronto",
                question: "Quale affermazione √® corretta?",
                options: ["‚àí3 > ‚àí1", "‚àí5 > ‚àí2", "‚àí2 > ‚àí5", "‚àí10 > ‚àí1"],
                correct: 2,
                explanation: "Tra due negativi, √® maggiore quello con valore assoluto minore: ‚àí2 > ‚àí5 perch√© |‚àí2| = 2 < 5 = |‚àí5|."
            },
            {
                category: "Regola dei Segni",
                question: "(‚àí4) ¬∑ (‚àí3) = ?",
                options: ["‚àí12", "+12", "‚àí7", "+7"],
                correct: 1,
                explanation: "Segni concordi (‚àí e ‚àí) danno risultato POSITIVO: (‚àí4) ¬∑ (‚àí3) = +12."
            },
            {
                category: "Regola dei Segni",
                question: "(+6) ¬∑ (‚àí2) = ?",
                options: ["+12", "‚àí12", "+4", "‚àí4"],
                correct: 1,
                explanation: "Segni discordi (+ e ‚àí) danno risultato NEGATIVO: (+6) ¬∑ (‚àí2) = ‚àí12."
            },
            {
                category: "Somma Algebrica",
                question: "‚àí5 + (‚àí3) = ?",
                options: ["+8", "‚àí8", "+2", "‚àí2"],
                correct: 1,
                explanation: "Operatore + e segno ‚àí sono discordi, quindi la parentesi diventa ‚àí: ‚àí5 ‚àí 3 = ‚àí8."
            },
            {
                category: "Somma Algebrica",
                question: "+4 ‚àí (‚àí2) = ?",
                options: ["+2", "‚àí2", "+6", "‚àí6"],
                correct: 2,
                explanation: "Operatore ‚àí e segno ‚àí sono concordi, quindi la parentesi diventa +: +4 + 2 = +6."
            },
            {
                category: "Divisione",
                question: "(‚àí20) : (+4) = ?",
                options: ["+5", "‚àí5", "+16", "‚àí16"],
                correct: 1,
                explanation: "Segni discordi (‚àí e +) danno risultato NEGATIVO: (‚àí20) : (+4) = ‚àí5."
            },
            {
                category: "Pi√π Fattori",
                question: "(‚àí2) ¬∑ (‚àí3) ¬∑ (‚àí1) = ?",
                options: ["+6", "‚àí6", "+5", "‚àí5"],
                correct: 1,
                explanation: "Ci sono 3 segni negativi (DISPARI), quindi il risultato √® NEGATIVO: ‚àí6."
            },
            {
                category: "Propriet√† Zero",
                question: "Quale operazione √® impossibile?",
                options: ["0 + 5", "0 ¬∑ 5", "0 : 5", "5 : 0"],
                correct: 3,
                explanation: "La divisione per zero √® IMPOSSIBILE! Non si pu√≤ mai dividere per zero."
            }
        ];
        
        let currentPhase = 1;
        let cardStates = {
            1: {},
            2: {},
            3: {}
        };
        let quizAnswers = {};
        let quizResults = {};
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initCards();
            generateQuiz();
            updateProgress();
        });
        
        function initCards() {
            document.querySelectorAll('.card').forEach(card => {
                card.addEventListener('click', function() {
                    const cardId = this.dataset.card;
                    const phaseNum = this.closest('.phase').id.replace('phase', '');
                    
                    this.classList.toggle('expanded');
                    
                    if (!this.classList.contains('viewed')) {
                        this.classList.add('viewed');
                        cardStates[phaseNum][cardId] = true;
                        checkPhaseComplete(phaseNum);
                    }
                });
            });
        }
        
        function checkPhaseComplete(phaseNum) {
            const phase = document.getElementById(`phase${phaseNum}`);
            const totalCards = phase.querySelectorAll('.card').length;
            const viewedCards = Object.keys(cardStates[phaseNum]).length;
            
            if (viewedCards >= totalCards) {
                document.getElementById(`btn${phaseNum}`).disabled = false;
            }
        }
        
        function generateQuiz() {
            const container = document.getElementById('quizContainer');
            container.innerHTML = '';
            
            quizData.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'quiz-question';
                questionDiv.id = `question${index}`;
                
                let optionsHtml = '';
                const letters = ['A', 'B', 'C', 'D'];
                q.options.forEach((opt, optIndex) => {
                    optionsHtml += `
                        <div class="option" data-question="${index}" data-option="${optIndex}" onclick="selectOption(${index}, ${optIndex})">
                            <div class="option-letter">${letters[optIndex]}</div>
                            <span>${opt}</span>
                        </div>
                    `;
                });
                
                questionDiv.innerHTML = `
                    <div class="question-category">${q.category}</div>
                    <div class="question-text">${index + 1}. ${q.question}</div>
                    <div class="options">${optionsHtml}</div>
                    <div class="feedback" id="feedback${index}"></div>
                `;
                
                container.appendChild(questionDiv);
            });
        }
        
        function selectOption(questionIndex, optionIndex) {
            const questionDiv = document.getElementById(`question${questionIndex}`);
            if (questionDiv.classList.contains('answered')) return;
            
            questionDiv.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            const selectedOption = questionDiv.querySelector(`[data-option="${optionIndex}"]`);
            selectedOption.classList.add('selected');
            quizAnswers[questionIndex] = optionIndex;
        }
        
        function verifyQuiz() {
            // Check all answered
            const unanswered = [];
            quizData.forEach((q, index) => {
                if (quizAnswers[index] === undefined) {
                    unanswered.push(index + 1);
                }
            });
            
            if (unanswered.length > 0) {
                alert(`Devi rispondere a tutte le domande! Mancano: ${unanswered.join(', ')}`);
                const firstUnanswered = document.getElementById(`question${unanswered[0] - 1}`);
                firstUnanswered.scrollIntoView({ behavior: 'smooth', block: 'center' });
                return;
            }
            
            // Grade quiz
            let correct = 0;
            quizData.forEach((q, index) => {
                const questionDiv = document.getElementById(`question${index}`);
                questionDiv.classList.add('answered');
                
                const isCorrect = quizAnswers[index] === q.correct;
                quizResults[q.category] = quizResults[q.category] || { correct: 0, total: 0 };
                quizResults[q.category].total++;
                
                if (isCorrect) {
                    correct++;
                    quizResults[q.category].correct++;
                    questionDiv.classList.add('correct');
                } else {
                    questionDiv.classList.add('incorrect');
                }
                
                // Show feedback
                const feedback = document.getElementById(`feedback${index}`);
                feedback.className = `feedback show ${isCorrect ? 'correct' : 'incorrect'}`;
                feedback.innerHTML = isCorrect 
                    ? `‚úì Corretto! ${q.explanation}`
                    : `‚úó Sbagliato. ${q.explanation}`;
                
                // Mark options
                questionDiv.querySelectorAll('.option').forEach((opt, optIndex) => {
                    opt.classList.add('disabled');
                    if (optIndex === q.correct) {
                        opt.classList.add('correct-answer');
                    } else if (optIndex === quizAnswers[index] && !isCorrect) {
                        opt.classList.add('wrong-answer');
                    }
                });
            });
            
            // Change button
            const btnVerify = document.getElementById('btnVerify');
            btnVerify.textContent = 'Vai al Ripasso ‚Üí';
            btnVerify.onclick = function() { goToPhase(5); };
            
            // Generate review
            generateReview(correct);
        }
        
        function generateReview(correctCount) {
            const scoreDisplay = document.getElementById('scoreDisplay');
            const percentage = Math.round((correctCount / quizData.length) * 100);
            
            scoreDisplay.innerHTML = `
                <div class="score-number">${correctCount}/${quizData.length}</div>
                <p style="font-size: 1.2rem; color: #666;">Risposte corrette (${percentage}%)</p>
            `;
            
            const reviewContainer = document.getElementById('reviewContainer');
            reviewContainer.innerHTML = '';
            
            // Group by category
            const categories = {
                "Definizioni": {
                    title: "üìö Definizioni Base",
                    content: `
                        <p class="concept-line">üìå <strong>Numeri relativi:</strong> numeri dotati di segno (+ o ‚àí)</p>
                        <p class="concept-line">‚úÖ <strong>Concordi:</strong> stesso segno (+ e +) o (‚àí e ‚àí)</p>
                        <p class="concept-line">‚ùé <strong>Discordi:</strong> segno opposto (+ e ‚àí) o (‚àí e +)</p>
                        <p class="concept-line">üìê <strong>Valore assoluto* (v.a.):</strong> distanza dallo zero, sempre ‚â• 0</p>
                        <p class="concept-line">‚ÜîÔ∏è <strong>Numeri opposti:</strong> stesso v.a., segno contrario</p>
                    `
                },
                "Confronto": {
                    title: "‚öñÔ∏è Confronto tra Numeri",
                    content: `
                        <p>Ogni positivo > 0 > ogni negativo</p>
                        <p><strong>Tra due negativi:</strong> √® maggiore quello con v.a. minore.</p>
                        <div class="example-box">‚àí2 > ‚àí5 perch√© |‚àí2| = 2 < 5 = |‚àí5|</div>
                    `
                },
                "Regola dei Segni": {
                    title: "‚≠ê La Regola Universale dei Segni",
                    content: `
                        <table class="rule-table">
                            <tr><th>Segni</th><th>Risultato</th></tr>
                            <tr><td>CONCORDI (+ +) o (‚àí ‚àí)</td><td><span class="positive">POSITIVO</span></td></tr>
                            <tr><td>DISCORDI (+ ‚àí) o (‚àí +)</td><td><span class="negative">NEGATIVO</span></td></tr>
                        </table>
                    `
                },
                "Somma Algebrica": {
                    title: "‚ûï‚ûñ Somma Algebrica",
                    content: `
                        <p>Applica la regola concordi/discordi all'<strong>operatore</strong> e al <strong>segno</strong> del numero:</p>
                        <p class="concept-line">‚úÖ + e + = concordi ‚Üí resta +</p>
                        <p class="concept-line">‚ùé + e ‚àí = discordi ‚Üí diventa ‚àí</p>
                        <p class="concept-line">‚ùé ‚àí e + = discordi ‚Üí diventa ‚àí</p>
                        <p class="concept-line">‚úÖ ‚àí e ‚àí = concordi ‚Üí diventa +</p>
                    `
                },
                "Divisione": {
                    title: "‚úñÔ∏è‚ûó Moltiplicazione e Divisione",
                    content: `
                        <p>Applica direttamente la regola dei segni:</p>
                        <div class="example-box">
                            (‚àí) ¬∑ (‚àí) = + &nbsp;&nbsp; (‚àí) ¬∑ (+) = ‚àí<br>
                            (+) ¬∑ (‚àí) = ‚àí &nbsp;&nbsp; (+) ¬∑ (+) = +
                        </div>
                        <p>Lo stesso vale per la divisione!</p>
                    `
                },
                "Pi√π Fattori": {
                    title: "üî¢ Prodotto con Pi√π Fattori",
                    content: `
                        <p>Conta i segni negativi:</p>
                        <p class="concept-line">‚úÖ <strong>PARI</strong> segni ‚àí ‚Üí risultato <span class="positive">POSITIVO</span></p>
                        <p class="concept-line">‚ùé <strong>DISPARI</strong> segni ‚àí ‚Üí risultato <span class="negative">NEGATIVO</span></p>
                    `
                },
                "Propriet√† Zero": {
                    title: "üîµ Propriet√† dello Zero",
                    content: `
                        <p class="concept-line">‚Ä¢ a + 0 = a (elemento neutro)</p>
                        <p class="concept-line">‚Ä¢ a √ó 0 = 0</p>
                        <p class="concept-line">‚Ä¢ 0 : a = 0 (se a ‚â† 0)</p>
                        <p class="concept-line" style="color: #e74c3c;"><strong>‚Ä¢ a : 0 = IMPOSSIBILE!</strong></p>
                    `
                }
            };
            
            for (const [cat, data] of Object.entries(categories)) {
                const result = quizResults[cat];
                const needsReview = result && result.correct < result.total;
                
                const section = document.createElement('div');
                section.className = `review-section ${needsReview ? 'needs-review' : 'mastered'}`;
                
                section.innerHTML = `
                    <span class="review-label ${needsReview ? 'needs-review' : 'mastered'}">
                        ${needsReview ? 'Da rivedere' : 'Hai capito bene'}
                    </span>
                    <h3 style="margin: 10px 0;">${data.title}</h3>
                    ${data.content}
                `;
                
                reviewContainer.appendChild(section);
            }
        }
        
        function goToPhase(phase) {
            document.querySelectorAll('.phase').forEach(p => p.classList.remove('active'));
            document.getElementById(`phase${phase}`).classList.add('active');
            currentPhase = phase;
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function updateProgress() {
            const progress = (currentPhase / 5) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }
        
        function restartQuiz() {
            quizAnswers = {};
            quizResults = {};
            generateQuiz();
            
            const btnVerify = document.getElementById('btnVerify');
            btnVerify.textContent = 'Verifica Risposte';
            btnVerify.onclick = verifyQuiz;
            
            goToPhase(4);
        }
    </script>
</body>
</html>
