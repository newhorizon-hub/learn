<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Riproduzione - Percorso Interattivo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.2em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.5s ease;
        }

        .phase {
            display: none;
        }

        .phase.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .phase-title {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .clickable-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .clickable-item {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border: 3px solid #667eea;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .clickable-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .clickable-item.opened {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .clickable-item.opened .item-title {
            color: white;
        }

        .item-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 10px;
            color: #667eea;
        }

        .item-content {
            display: none;
            margin-top: 10px;
            line-height: 1.6;
        }

        .clickable-item.opened .item-content {
            display: block;
        }

        .check-mark {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #4CAF50;
            font-size: 1.5em;
            display: none;
        }

        .clickable-item.opened .check-mark {
            display: block;
            color: white;
        }

        .card-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .card {
            background: #f5f7fa;
            border: 2px solid #667eea;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s;
        }

        .card-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-header:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }

        .card-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding: 0 20px;
        }

        .card.expanded .card-body {
            max-height: 800px;
            padding: 20px;
        }

        .card.opened {
            border-color: #4CAF50;
        }

        .question {
            background: #f5f7fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .question-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 15px;
            color: #333;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 12px 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .option.correct {
            border-color: #4CAF50;
            background: #4CAF50;
            color: white;
        }

        .option.incorrect {
            border-color: #f44336;
            background: #f44336;
            color: white;
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #d4edda;
            border: 2px solid #4CAF50;
            color: #155724;
        }

        .feedback.incorrect {
            background: #f8d7da;
            border: 2px solid #f44336;
            color: #721c24;
        }

        .score-summary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .score-summary h3 {
            font-size: 1.3em;
            margin-bottom: 15px;
        }

        .score-numbers {
            font-size: 3em;
            font-weight: bold;
            margin: 15px 0;
        }

        .score-percentage {
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .review-section {
            background: #fff9c4;
            border: 3px solid #fbc02d;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .review-section.good {
            background: #d4edda;
            border-color: #4CAF50;
        }

        .review-label {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .btn-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .instruction {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            font-size: 0.95em;
        }

        @media print {
            body { background: white; padding: 0; }
            .container { box-shadow: none; padding: 20px; }
            .phase { display: none !important; }
            #phase5 { display: block !important; }
            .progress-bar, .btn, .phase-title { display: none !important; }
        }

        @media (max-width: 600px) {
            .clickable-grid { grid-template-columns: 1fr; }
            h1 { font-size: 1.5em; }
            .btn-container { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß¨ La Riproduzione</h1>
        <div class="subtitle">Percorso Propedeutico ‚Äî Classe Terza</div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <!-- FASE 1 -->
        <div id="phase1" class="phase active">
            <div class="phase-title">üìä Fase 1: Genetica e Divisione Cellulare</div>
            <div class="instruction">
                ‚ú® Clicca su ogni box per scoprire i concetti fondamentali
            </div>
            
            <div class="clickable-grid">
                <div class="clickable-item" data-item="1">
                    <span class="check-mark">‚úì</span>
                    <div class="item-title">DNA e Cromosomi</div>
                    <div class="item-content">
                        Il <strong>DNA</strong> contiene tutte le informazioni genetiche. √à organizzato in <strong>cromosomi</strong> (46 nell'essere umano: 23 coppie). I cromosomi sessuali determinano il sesso: XX = femmina, XY = maschio.
                    </div>
                </div>

                <div class="clickable-item" data-item="2">
                    <span class="check-mark">‚úì</span>
                    <div class="item-title">Mitosi</div>
                    <div class="item-content">
                        Divisione cellulare che produce <strong>due cellule identiche</strong> alla cellula madre. Funzione: crescita del corpo, riparazione tessuti. Risultato: da 1 cellula ‚Üí 2 cellule con 46 cromosomi ciascuna.
                    </div>
                </div>

                <div class="clickable-item" data-item="3">
                    <span class="check-mark">‚úì</span>
                    <div class="item-title">Meiosi</div>
                    <div class="item-content">
                        Divisione cellulare che produce <strong>quattro gameti</strong> (cellule sessuali) con met√† dei cromosomi. Funzione: produzione spermatozoi e ovuli. Risultato: da 1 cellula ‚Üí 4 gameti con 23 cromosomi ciascuno.
                    </div>
                </div>

                <div class="clickable-item" data-item="4">
                    <span class="check-mark">‚úì</span>
                    <div class="item-title">Leggi di Mendel</div>
                    <div class="item-content">
                        <strong>Gregor Mendel</strong> studi√≤ come si trasmettono i caratteri ereditari. Ogni carattere ha due alleli (versioni): uno <strong>dominante</strong> (si manifesta) e uno <strong>recessivo</strong> (rimane nascosto).
                    </div>
                </div>
            </div>

            <button class="btn" id="nextPhase1" disabled>Continua alla Fase 2 ‚Üí</button>
        </div>

        <!-- FASE 2 -->
        <div id="phase2" class="phase">
            <div class="phase-title">üîç Fase 2: Apparati Riproduttori e Sviluppo</div>
            <div class="instruction">
                ‚ú® Clicca su ogni box per esplorare gli argomenti
            </div>
            
            <div class="clickable-grid">
                <div class="clickable-item" data-item="5">
                    <span class="check-mark">‚úì</span>
                    <div class="item-title">Apparato Riproduttore Maschile</div>
                    <div class="item-content">
                        Organi: <strong>testicoli</strong> (producono spermatozoi e testosterone), epididimo, dotti deferenti, prostata, pene. Lo <strong>spermatozoo</strong> √® il gamete maschile mobile.
                    </div>
                </div>

                <div class="clickable-item" data-item="6">
                    <span class="check-mark">‚úì</span>
                    <div class="item-title">Apparato Riproduttore Femminile</div>
                    <div class="item-content">
                        Organi: <strong>ovaie</strong> (producono ovuli ed estrogeni), tube di Falloppio, utero, vagina. L'<strong>ovulo</strong> √® il gamete femminile. Il <strong>ciclo mestruale</strong> dura circa 28 giorni.
                    </div>
                </div>

                <div class="clickable-item" data-item="7">
                    <span class="check-mark">‚úì</span>
                    <div class="item-title">Gravidanza</div>
                    <div class="item-content">
                        <strong>Fecondazione:</strong> unione spermatozoo + ovulo = zigote. Lo zigote si sviluppa in <strong>embrione</strong> (prime 8 settimane) poi in <strong>feto</strong>. La placenta nutre il feto. Durata: circa 40 settimane.
                    </div>
                </div>

                <div class="clickable-item" data-item="8">
                    <span class="check-mark">‚úì</span>
                    <div class="item-title">Ciclo Riproduttivo e Pubert√†</div>
                    <div class="item-content">
                        Durante la <strong>pubert√†</strong> si sviluppano i caratteri sessuali secondari causati dagli ormoni. La <strong>menopausa</strong> (45-55 anni) √® la cessazione naturale del ciclo mestruale.
                    </div>
                </div>
            </div>

            <button class="btn" id="nextPhase2" disabled>Continua alla Fase 3 ‚Üí</button>
        </div>

        <!-- FASE 3 -->
        <div id="phase3" class="phase">
            <div class="phase-title">üìö Fase 3: Gli 11 Argomenti in Dettaglio</div>
            <div class="instruction">
                ‚ú® Espandi ogni card per approfondire ‚Äî queste sono le aree di ricerca
            </div>

            <div class="card-container">
                <div class="card" data-card="1">
                    <div class="card-header">
                        1. DNA e Cromosomi
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="card-body">
                        <strong>DNA:</strong> Acido Desossiribonucleico, molecola a doppia elica che contiene le istruzioni genetiche.<br><br>
                        <strong>Gene:</strong> Segmento di DNA che codifica un carattere (es. colore occhi).<br><br>
                        <strong>Cromosomi:</strong> DNA condensato. L'essere umano ha 46 cromosomi (23 coppie).<br><br>
                        <strong>Cromosomi sessuali:</strong> XX = femmina, XY = maschio
                    </div>
                </div>

                <div class="card" data-card="2">
                    <div class="card-header">
                        2. Mitosi
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="card-body">
                        <strong>Definizione:</strong> Divisione cellulare che produce due cellule figlie identiche.<br><br>
                        <strong>Fasi:</strong> Profase ‚Üí Metafase ‚Üí Anafase ‚Üí Telofase<br><br>
                        <strong>Funzione:</strong> Crescita, riparazione tessuti, sostituzione cellule morte.<br><br>
                        <strong>Risultato:</strong> 1 cellula (46 cromosomi) ‚Üí 2 cellule identiche (46 cromosomi ciascuna)
                    </div>
                </div>

                <div class="card" data-card="3">
                    <div class="card-header">
                        3. Meiosi
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="card-body">
                        <strong>Definizione:</strong> Divisione cellulare che produce quattro gameti con met√† cromosomi.<br><br>
                        <strong>Funzione:</strong> Produzione spermatozoi (maschio) e ovuli (femmina).<br><br>
                        <strong>Differenza con mitosi:</strong> Due divisioni successive, dimezzamento cromosomi, variabilit√† genetica.<br><br>
                        <strong>Risultato:</strong> 1 cellula (46 cromosomi) ‚Üí 4 gameti (23 cromosomi ciascuno)
                    </div>
                </div>

                <div class="card" data-card="4">
                    <div class="card-header">
                        4. Apparato Riproduttore Maschile
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="card-body">
                        <strong>Organi:</strong><br>
                        ‚Ä¢ Testicoli: producono spermatozoi (meiosi) e testosterone<br>
                        ‚Ä¢ Epididimo: maturazione spermatozoi<br>
                        ‚Ä¢ Dotti deferenti: trasporto spermatozoi<br>
                        ‚Ä¢ Prostata e vescicole seminali: liquido seminale<br>
                        ‚Ä¢ Pene: organo copulatore<br><br>
                        <strong>Spermatozoo:</strong> Gamete maschile mobile con testa (DNA), corpo (energia) e coda (movimento)
                    </div>
                </div>

                <div class="card" data-card="5">
                    <div class="card-header">
                        5. Apparato Riproduttore Femminile
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="card-body">
                        <strong>Organi:</strong><br>
                        ‚Ä¢ Ovaie: producono ovuli (meiosi) ed ormoni (estrogeni, progesterone)<br>
                        ‚Ä¢ Tube di Falloppio: trasporto ovulo, sede fecondazione<br>
                        ‚Ä¢ Utero: accoglie e nutre embrione/feto<br>
                        ‚Ä¢ Vagina: canale esterno<br><br>
                        <strong>Ovulo:</strong> Gamete femminile, cellula grande e immobile.<br><br>
                        <strong>Ciclo mestruale:</strong> Circa 28 giorni. Fasi: ovulazione ‚Üí preparazione utero ‚Üí eventuale mestruazione
                    </div>
                </div>

                <div class="card" data-card="6">
                    <div class="card-header">
                        6. Gravidanza
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="card-body">
                        <strong>Fecondazione:</strong> Spermatozoo + ovulo = zigote (23 + 23 = 46 cromosomi)<br><br>
                        <strong>Sviluppo:</strong><br>
                        ‚Ä¢ Settimane 1-8: embrione (formazione organi)<br>
                        ‚Ä¢ Settimane 9-40: feto (crescita e maturazione)<br><br>
                        <strong>Placenta:</strong> Organo che collega feto alla madre, scambio ossigeno e nutrienti.<br><br>
                        <strong>Durata:</strong> Circa 40 settimane (9 mesi)
                    </div>
                </div>

                <div class="card" data-card="7">
                    <div class="card-header">
                        7. Menopausa e Ciclo Riproduttivo
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="card-body">
                        <strong>Pubert√† femminile:</strong> Inizio ciclo mestruale (menarca), 11-14 anni<br><br>
                        <strong>Et√† fertile:</strong> Dal menarca alla menopausa<br><br>
                        <strong>Menopausa:</strong> Cessazione definitiva ciclo mestruale, 45-55 anni<br><br>
                        <strong>Cambiamenti:</strong> Riduzione ormoni, fine ovulazione, processo fisiologico naturale
                    </div>
                </div>

                <div class="card" data-card="8">
                    <div class="card-header">
                        8. Caratteri Sessuali Secondari
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="card-body">
                        <strong>Definizione:</strong> Caratteristiche che si sviluppano durante pubert√†, diverse tra maschi e femmine.<br><br>
                        <strong>Maschi:</strong> Voce grave, barba, sviluppo muscolare, allargamento spalle<br><br>
                        <strong>Femmine:</strong> Sviluppo seno, allargamento fianchi, voce acuta<br><br>
                        <strong>Causa:</strong> Ormoni sessuali (testosterone maschi, estrogeni femmine)
                    </div>
                </div>

                <div class="card" data-card="9">
                    <div class="card-header">
                        9. Contraccezione e Sessualit√† Responsabile
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="card-body">
                        <strong>Contraccezione:</strong> Metodi per prevenire gravidanze indesiderate<br><br>
                        <strong>Metodi:</strong><br>
                        ‚Ä¢ Preservativo: barriera meccanica, protegge anche da MST<br>
                        ‚Ä¢ Pillola: ormoni che bloccano ovulazione<br>
                        ‚Ä¢ Spirale (IUD): dispositivo intrauterino<br>
                        ‚Ä¢ Metodi naturali: calcolo periodo fertile<br><br>
                        <strong>Educazione sessuale:</strong> Conoscenza, consapevolezza, scelte responsabili
                    </div>
                </div>

                <div class="card" data-card="10">
                    <div class="card-header">
                        10. MST e Prevenzione
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="card-body">
                        <strong>MST:</strong> Malattie Sessualmente Trasmissibili, infezioni trasmesse con rapporti sessuali<br><br>
                        <strong>Principali MST:</strong><br>
                        ‚Ä¢ HIV/AIDS: virus che colpisce sistema immunitario<br>
                        ‚Ä¢ HPV: papilloma virus, pu√≤ causare tumori<br>
                        ‚Ä¢ Clamidia, Gonorrea, Sifilide: infezioni batteriche<br>
                        ‚Ä¢ Herpes genitale: infezione virale<br><br>
                        <strong>Prevenzione:</strong> Uso preservativo, test, vaccinazione (HPV), informazione
                    </div>
                </div>

                <div class="card" data-card="11">
                    <div class="card-header">
                        11. Leggi di Mendel ed Ereditariet√†
                        <span class="toggle">‚ñº</span>
                    </div>
                    <div class="card-body">
                        <strong>Gregor Mendel:</strong> Studi√≤ trasmissione caratteri con piante di pisello<br><br>
                        <strong>Prima Legge (Dominanza):</strong> Ogni carattere ha due alleli. L'allele dominante si manifesta, il recessivo rimane nascosto.<br><br>
                        <strong>Seconda Legge (Segregazione):</strong> Gli alleli si separano durante formazione gameti.<br><br>
                        <strong>Terza Legge (Indipendenza):</strong> Caratteri diversi si trasmettono indipendentemente.<br><br>
                        <strong>Esempi:</strong> Colore occhi, gruppo sanguigno, lobi orecchie
                    </div>
                </div>
            </div>

            <button class="btn" id="nextPhase3" disabled>Continua alla Verifica ‚Üí</button>
        </div>

        <!-- FASE 4 -->
        <div id="phase4" class="phase">
            <div class="phase-title">‚úÖ Fase 4: Verifica le tue Conoscenze</div>
            <div class="instruction">
                üìù Rispondi a tutte le domande, poi clicca su "Verifica Risposte"
            </div>

            <div class="question" data-question="1">
                <div class="question-title">1. Quanti cromosomi ha una cellula umana normale?</div>
                <div class="options">
                    <div class="option" data-answer="wrong">23</div>
                    <div class="option" data-answer="correct">46</div>
                    <div class="option" data-answer="wrong">92</div>
                    <div class="option" data-answer="wrong">12</div>
                </div>
                <div class="feedback">
                    <strong>Spiegazione:</strong> Le cellule umane hanno 46 cromosomi organizzati in 23 coppie.
                </div>
            </div>

            <div class="question" data-question="2">
                <div class="question-title">2. Qual √® la differenza tra mitosi e meiosi?</div>
                <div class="options">
                    <div class="option" data-answer="wrong">La mitosi produce gameti, la meiosi produce cellule normali</div>
                    <div class="option" data-answer="correct">La mitosi produce cellule identiche con 46 cromosomi, la meiosi produce gameti con 23 cromosomi</div>
                    <div class="option" data-answer="wrong">Sono la stessa cosa</div>
                    <div class="option" data-answer="wrong">La mitosi avviene solo nei maschi</div>
                </div>
                <div class="feedback">
                    <strong>Spiegazione:</strong> La mitosi produce 2 cellule identiche (46 cromosomi), la meiosi produce 4 gameti (23 cromosomi ciascuno).
                </div>
            </div>

            <div class="question" data-question="3">
                <div class="question-title">3. Dove avviene la produzione degli spermatozoi?</div>
                <div class="options">
                    <div class="option" data-answer="wrong">Nella prostata</div>
                    <div class="option" data-answer="correct">Nei testicoli</div>
                    <div class="option" data-answer="wrong">Nel pene</div>
                    <div class="option" data-answer="wrong">Nell'epididimo</div>
                </div>
                <div class="feedback">
                    <strong>Spiegazione:</strong> I testicoli producono gli spermatozoi attraverso il processo di meiosi.
                </div>
            </div>

            <div class="question" data-question="4">
                <div class="question-title">4. Qual √® la funzione delle ovaie?</div>
                <div class="options">
                    <div class="option" data-answer="wrong">Trasportare l'ovulo</div>
                    <div class="option" data-answer="wrong">Accogliere il feto</div>
                    <div class="option" data-answer="correct">Produrre ovuli e ormoni</div>
                    <div class="option" data-answer="wrong">Produrre latte</div>
                </div>
                <div class="feedback">
                    <strong>Spiegazione:</strong> Le ovaie producono gli ovuli (meiosi) e gli ormoni femminili (estrogeni, progesterone).
                </div>
            </div>

            <div class="question" data-question="5">
                <div class="question-title">5. Che cos'√® la fecondazione?</div>
                <div class="options">
                    <div class="option" data-answer="wrong">La produzione di gameti</div>
                    <div class="option" data-answer="correct">L'unione di spermatozoo e ovulo che forma lo zigote</div>
                    <div class="option" data-answer="wrong">La divisione cellulare</div>
                    <div class="option" data-answer="wrong">Lo sviluppo del feto</div>
                </div>
                <div class="feedback">
                    <strong>Spiegazione:</strong> La fecondazione √® l'unione dello spermatozoo (23 cromosomi) con l'ovulo (23 cromosomi) che forma lo zigote (46 cromosomi).
                </div>
            </div>

            <div class="question" data-question="6">
                <div class="question-title">6. Qual √® la funzione della placenta?</div>
                <div class="options">
                    <div class="option" data-answer="wrong">Produrre ovuli</div>
                    <div class="option" data-answer="correct">Scambio di ossigeno e nutrienti tra madre e feto</div>
                    <div class="option" data-answer="wrong">Trasportare lo spermatozoo</div>
                    <div class="option" data-answer="wrong">Produrre ormoni maschili</div>
                </div>
                <div class="feedback">
                    <strong>Spiegazione:</strong> La placenta collega il feto alla madre e permette lo scambio di ossigeno, nutrienti e sostanze di scarto.
                </div>
            </div>

            <div class="question" data-question="7">
                <div class="question-title">7. Che cosa sono i caratteri sessuali secondari?</div>
                <div class="options">
                    <div class="option" data-answer="wrong">Gli organi riproduttori</div>
                    <div class="option" data-answer="correct">Le caratteristiche fisiche che si sviluppano durante la pubert√†</div>
                    <div class="option" data-answer="wrong">I cromosomi sessuali</div>
                    <div class="option" data-answer="wrong">I gameti</div>
                </div>
                <div class="feedback">
                    <strong>Spiegazione:</strong> I caratteri sessuali secondari sono le caratteristiche che si sviluppano durante la pubert√† (voce, peli, seno...) causate dagli ormoni.
                </div>
            </div>

            <div class="question" data-question="8">
                <div class="question-title">8. Qual √® il metodo contraccettivo che protegge anche dalle MST?</div>
                <div class="options">
                    <div class="option" data-answer="wrong">La pillola</div>
                    <div class="option" data-answer="correct">Il preservativo</div>
                    <div class="option" data-answer="wrong">La spirale</div>
                    <div class="option" data-answer="wrong">I metodi naturali</div>
                </div>
                <div class="feedback">
                    <strong>Spiegazione:</strong> Il preservativo √® l'unico metodo contraccettivo che protegge anche dalle malattie sessualmente trasmissibili.
                </div>
            </div>

            <div class="question" data-question="9">
                <div class="question-title">9. Che cosa determina il sesso biologico di un individuo?</div>
                <div class="options">
                    <div class="option" data-answer="wrong">Gli autosomi</div>
                    <div class="option" data-answer="correct">I cromosomi sessuali (XX o XY)</div>
                    <div class="option" data-answer="wrong">Gli ormoni</div>
                    <div class="option" data-answer="wrong">Il DNA mitocondriale</div>
                </div>
                <div class="feedback">
                    <strong>Spiegazione:</strong> I cromosomi sessuali determinano il sesso: XX = femmina, XY = maschio.
                </div>
            </div>

            <div class="question" data-question="10">
                <div class="question-title">10. Secondo Mendel, che cos'√® un allele dominante?</div>
                <div class="options">
                    <div class="option" data-answer="wrong">Un allele che rimane nascosto</div>
                    <div class="option" data-answer="correct">Un allele che si manifesta anche in presenza di un altro allele diverso</div>
                    <div class="option" data-answer="wrong">Un cromosoma sessuale</div>
                    <div class="option" data-answer="wrong">Un tipo di DNA</div>
                </div>
                <div class="feedback">
                    <strong>Spiegazione:</strong> L'allele dominante si manifesta nel fenotipo anche se presente una sola volta. L'allele recessivo si manifesta solo se presente due volte.
                </div>
            </div>

            <div class="btn-container">
                <button class="btn" id="checkAnswers">Verifica Risposte</button>
            </div>
        </div>

        <!-- FASE 5 -->
        <div id="phase5" class="phase">
            <div class="phase-title">üìñ Fase 5: Ripasso Personalizzato</div>
            
            <div class="score-summary" id="scoreSummary">
                <h3>Risultato della Verifica</h3>
                <div class="score-numbers" id="scoreNumbers"></div>
                <div class="score-percentage" id="scorePercentage"></div>
            </div>

            <div id="reviewContent"></div>
            
            <div class="btn-container">
                <button class="btn" onclick="window.print()">üñ®Ô∏è Stampa Ripasso</button>
                <button class="btn" id="backToQuiz">‚Üê Rivedi Errori</button>
                <button class="btn" id="restart">üîÑ Ricomincia</button>
            </div>
        </div>
    </div>

    <script>
        let currentPhase = 1;
        let openedItems = { phase1: new Set(), phase2: new Set(), phase3: new Set() };
        let answers = {};
        let quizResults = {};

        function updateProgress() {
            const progress = (currentPhase / 5) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function showPhase(phaseNum) {
            document.querySelectorAll('.phase').forEach(p => p.classList.remove('active'));
            document.getElementById('phase' + phaseNum).classList.add('active');
            currentPhase = phaseNum;
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        document.querySelectorAll('.clickable-item').forEach(item => {
            item.addEventListener('click', function() {
                if (!this.classList.contains('opened')) {
                    this.classList.add('opened');
                    const itemId = this.getAttribute('data-item');
                    const phase = currentPhase === 1 ? 'phase1' : 'phase2';
                    openedItems[phase].add(itemId);
                    checkPhaseCompletion(phase);
                }
            });
        });

        function checkPhaseCompletion(phase) {
            if (phase === 'phase1' && openedItems.phase1.size === 4) {
                document.getElementById('nextPhase1').disabled = false;
            } else if (phase === 'phase2' && openedItems.phase2.size === 4) {
                document.getElementById('nextPhase2').disabled = false;
            } else if (phase === 'phase3' && openedItems.phase3.size === 11) {
                document.getElementById('nextPhase3').disabled = false;
            }
        }

        document.getElementById('nextPhase1').addEventListener('click', () => showPhase(2));
        document.getElementById('nextPhase2').addEventListener('click', () => showPhase(3));
        document.getElementById('nextPhase3').addEventListener('click', () => showPhase(4));

        document.querySelectorAll('.card').forEach(card => {
            const header = card.querySelector('.card-header');
            header.addEventListener('click', function() {
                const wasExpanded = card.classList.contains('expanded');
                card.classList.toggle('expanded');
                const toggle = this.querySelector('.toggle');
                toggle.textContent = wasExpanded ? '‚ñº' : '‚ñ≤';
                
                if (!card.classList.contains('opened')) {
                    card.classList.add('opened');
                    const cardId = card.getAttribute('data-card');
                    openedItems.phase3.add(cardId);
                    checkPhaseCompletion('phase3');
                }
            });
        });

        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', function() {
                const question = this.closest('.question');
                const questionNum = question.getAttribute('data-question');
                question.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                answers[questionNum] = this.getAttribute('data-answer');
            });
        });

        document.getElementById('checkAnswers').addEventListener('click', function() {
            const totalQuestions = document.querySelectorAll('.question').length;
            
            if (Object.keys(answers).length < totalQuestions) {
                const unanswered = [];
                for (let i = 1; i <= totalQuestions; i++) {
                    if (!answers[i.toString()]) unanswered.push(i);
                }
                alert('Per favore rispondi a tutte le domande! Mancano: ' + unanswered.join(', '));
                const firstUnanswered = document.querySelector(`.question[data-question="${unanswered[0]}"]`);
                firstUnanswered.scrollIntoView({ behavior: 'smooth', block: 'center' });
                return;
            }

            let correct = 0;
            document.querySelectorAll('.question').forEach(question => {
                const questionNum = question.getAttribute('data-question');
                const selectedOption = question.querySelector('.option.selected');
                const feedback = question.querySelector('.feedback');
                const isCorrect = answers[questionNum] === 'correct';
                
                quizResults[questionNum] = isCorrect;
                
                if (isCorrect) {
                    correct++;
                    selectedOption.classList.add('correct');
                    feedback.classList.add('show', 'correct');
                } else {
                    selectedOption.classList.add('incorrect');
                    feedback.classList.add('show', 'incorrect');
                    const correctOption = question.querySelector('.option[data-answer="correct"]');
                    correctOption.style.border = '2px solid #4CAF50';
                    correctOption.style.fontWeight = 'bold';
                }
            });

            window.quizScore = {
                correct: correct,
                total: totalQuestions,
                percentage: Math.round((correct / totalQuestions) * 100)
            };

            this.textContent = 'Vai al Ripasso ‚Üí';
            this.onclick = () => {
                generateReview();
                showPhase(5);
            };
        });

        function generateReview() {
            document.getElementById('scoreNumbers').textContent = 
                window.quizScore.correct + '/' + window.quizScore.total;
            document.getElementById('scorePercentage').textContent = 
                window.quizScore.percentage + '%';

            const reviewContent = document.getElementById('reviewContent');
            let html = '';

            const topicAreas = {
                '1': 'Cromosomi',
                '2': 'Mitosi e Meiosi',
                '3': 'Apparato Riproduttore Maschile',
                '4': 'Apparato Riproduttore Femminile',
                '5': 'Fecondazione',
                '6': 'Gravidanza',
                '7': 'Caratteri Sessuali',
                '8': 'Contraccezione e MST',
                '9': 'Cromosomi Sessuali',
                '10': 'Leggi di Mendel'
            };

            const areaResults = {};
            for (let q in quizResults) {
                const area = topicAreas[q];
                if (!areaResults[area]) areaResults[area] = { correct: 0, total: 0 };
                areaResults[area].total++;
                if (quizResults[q]) areaResults[area].correct++;
            }

            for (let area in areaResults) {
                const result = areaResults[area];
                const isGood = result.correct === result.total;
                
                html += `<div class="review-section ${isGood ? 'good' : ''}">`;
                html += `<div class="review-label">${isGood ? '‚úÖ Hai capito bene' : '‚ö†Ô∏è Da rivedere'}: ${area}</div>`;
                
                if (!isGood) {
                    if (area === 'Cromosomi') {
                        html += `<p><strong>Ricorda:</strong> Le cellule umane hanno 46 cromosomi (23 coppie). Il DNA contiene le informazioni genetiche.</p>`;
                    } else if (area === 'Mitosi e Meiosi') {
                        html += `<p><strong>Ricorda:</strong> Mitosi ‚Üí 2 cellule identiche (46 cromosomi). Meiosi ‚Üí 4 gameti (23 cromosomi ciascuno).</p>`;
                    } else if (area === 'Apparato Riproduttore Maschile') {
                        html += `<p><strong>Ricorda:</strong> I testicoli producono spermatozoi tramite meiosi e testosterone.</p>`;
                    } else if (area === 'Apparato Riproduttore Femminile') {
                        html += `<p><strong>Ricorda:</strong> Le ovaie producono ovuli tramite meiosi e ormoni femminili (estrogeni, progesterone).</p>`;
                    } else if (area === 'Fecondazione') {
                        html += `<p><strong>Ricorda:</strong> Fecondazione = spermatozoo (23) + ovulo (23) = zigote (46 cromosomi).</p>`;
                    } else if (area === 'Gravidanza') {
                        html += `<p><strong>Ricorda:</strong> La placenta collega feto e madre, scambio ossigeno/nutrienti. Durata: 40 settimane.</p>`;
                    } else if (area === 'Caratteri Sessuali') {
                        html += `<p><strong>Ricorda:</strong> I caratteri sessuali secondari si sviluppano durante la pubert√† per azione degli ormoni.</p>`;
                    } else if (area === 'Contraccezione e MST') {
                        html += `<p><strong>Ricorda:</strong> Il preservativo protegge da gravidanze indesiderate E dalle MST.</p>`;
                    } else if (area === 'Cromosomi Sessuali') {
                        html += `<p><strong>Ricorda:</strong> XX = femmina, XY = maschio. I cromosomi sessuali determinano il sesso biologico.</p>`;
                    } else if (area === 'Leggi di Mendel') {
                        html += `<p><strong>Ricorda:</strong> Allele dominante = si manifesta. Allele recessivo = rimane nascosto se c'√® il dominante.</p>`;
                    }
                } else {
                    html += `<p>Hai capito bene questi concetti. Continua a esercitarti!</p>`;
                }
                
                html += `</div>`;
            }

            reviewContent.innerHTML = html;
        }

        document.getElementById('backToQuiz').addEventListener('click', () => showPhase(4));
        document.getElementById('restart').addEventListener('click', () => location.reload());

        updateProgress();
    </script>
</body>
</html>
